import{O as o,C as n}from"./bsConstants-CoTtd-5D.js";/* empty css              */o.onReady(async()=>{const l=await o.player.getSelection();if(!l)return await o.popover.close(n.CONTEXTID);const v=document.getElementById("visionContext"),I=document.getElementById("bumperContext"),r=document.getElementById("falloffContext"),c=document.getElementById("darkContext"),f=document.getElementById("innerContext"),g=document.getElementById("outerContext"),u=await o.scene.items.getItems(a=>l?.includes(a.id)),N=await o.scene.getMetadata();if(u.length===1){const a=u[0];v.value=a.metadata[`${n.EXTENSIONID}/visionRange`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionRange`]:i("visionRangeDefault"),I.value=a.metadata[`${n.EXTENSIONID}/visionSourceRange`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionSourceRange`]:i("visionSourceDefault"),r.value=a.metadata[`${n.EXTENSIONID}/visionFallOff`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionFallOff`]:i("visionFallOffDefault"),f.value=a.metadata[`${n.EXTENSIONID}/visionInAngle`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionInAngle`]:i("visionInAngleDefault"),g.value=a.metadata[`${n.EXTENSIONID}/visionOutAngle`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionOutAngle`]:i("visionOutAngleDefault"),c.value=a.metadata[`${n.EXTENSIONID}/visionDark`]!==void 0?a.metadata[`${n.EXTENSIONID}/visionDark`]:i("visionDarkDefault")}v.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseInt(e.value);t<0&&(e.value="0"),t>999&&(e.value="999"),isNaN(t)&&(e.value=i("visionRangeDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionRange`]=e.value})},I.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseFloat(e.value);t<0&&(e.value="0"),t>999&&(e.value="999"),isNaN(t)&&(e.value=i("visionSourceDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionSourceRange`]=e.value})},r.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseFloat(e.value);t<0&&(e.value="0"),t>10&&(e.value="10"),isNaN(t)&&(e.value=i("visionFallOffDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionFallOff`]=e.value})},f.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseInt(e.value);t<0&&(e.value="0"),t>360&&(e.value="360"),isNaN(t)&&(e.value=i("visionInAngleDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionInAngle`]=e.value})},g.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseInt(e.value);t<0&&(e.value="0"),t>360&&(e.value="360"),isNaN(t)&&(e.value=i("visionOutAngleDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionOutAngle`]=e.value})},c.onchange=async a=>{if(!a||!a.target)return;const e=a.target,t=parseInt(e.value);t<0&&(e.value="0"),t>999&&(e.value="999"),isNaN(t)&&(e.value=i("visionDarkDefault")),await o.scene.items.updateItems(u,s=>{s[0].metadata[`${n.EXTENSIONID}/visionDark`]=e.value})};function i(a){const e=N[`${n.EXTENSIONID}/${a}`];return e||n.ATTENUATIONDEFAULT}});
