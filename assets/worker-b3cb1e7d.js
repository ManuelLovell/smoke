var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function Je(_){if(_.__esModule)return _;var M=_.default;if(typeof M=="function"){var x=function A(){return this instanceof A?Reflect.construct(M,arguments,this.constructor):M.apply(this,arguments)};x.prototype=M.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(_).forEach(function(A){var R=Object.getOwnPropertyDescriptor(_,A);Object.defineProperty(x,A,R.get?R:{enumerable:!0,get:function(){return _[A]}})}),x}var Ee={exports:{}},tn={},en=Object.freeze({__proto__:null,default:tn}),Ht=Je(en);(function(_,M){var x=(()=>{var A=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(A=A||__filename),function(R){R=R||{};var o;o||(o=typeof R<"u"?R:{});var J=Object.assign,q,tt;o.ready=new Promise(function(e,t){q=e,tt=t}),function(e){var t={};e.loadCmdsTypedArray=function(u){for(var f=0,l=0;l<u.length;l++)f+=u[l].length;if(t[f])var c=t[f];else c=new Float32Array(f),t[f]=c;var p=0;for(l=0;l<u.length;l++)for(var d=0;d<u[l].length;d++){var v=u[l][d];typeof v=="string"&&(v=e.SkBits2FloatUnsigned(parseInt(v))),c[p]=v,p++}return u=e._malloc(c.length*c.BYTES_PER_ELEMENT),e.HEAPF32.set(c,u/c.BYTES_PER_ELEMENT),[u,f]},e.FromCmds=function(u){u=e.loadCmdsTypedArray(u);var f=e._FromCmds(u[0],u[1]);return e._free(u[0]),f};var n,r,a,i,s;e.cubicYFromX=function(u,f,l,c,p){return n&&r===u&&a===f&&i===l&&s===c||(n&&n.delete(),n=new e._SkCubicMap([u,f],[l,c]),r=u,a=f,i=l,s=c),n.computeYFromX(p)},e.cubicPtFromT=function(u,f,l,c,p){return n&&r===u&&a===f&&i===l&&s===c||(n&&n.delete(),n=new e._SkCubicMap([u,f],[l,c]),r=u,a=f,i=l,s=c),n.computePtFromT(p)}}(o),function(e){e.onRuntimeInitialized=function(){e.SkPath.prototype.addPath=function(){var t=arguments[0];if(arguments.length===1)this._addPath(t,1,0,0,0,1,0,0,0,1);else if(arguments.length===2){var n=arguments[1];this._addPath(t,n.a,n.c,n.e,n.b,n.d,n.f,0,0,1)}else if(arguments.length===7)n=arguments,this._addPath(t,n[1],n[3],n[5],n[2],n[4],n[6],0,0,1);else if(arguments.length===10)n=arguments,this._addPath(t,n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);else return console.Ma("addPath expected to take 1, 2, 7, or 10 args. Got "+arguments.length),null;return this},e.SkPath.prototype.arc=function(t,n,r,a,i,s){return this._arc(t,n,r,a,i,!!s),this},e.SkPath.prototype.arcTo=function(t,n,r,a,i){return this._arcTo(t,n,r,a,i),this},e.SkPath.prototype.bezierCurveTo=function(t,n,r,a,i,s){return this._cubicTo(t,n,r,a,i,s),this},e.SkPath.prototype.close=function(){return this._close(),this},e.SkPath.prototype.closePath=function(){return this._close(),this},e.SkPath.prototype.conicTo=function(t,n,r,a,i){return this._conicTo(t,n,r,a,i),this},e.SkPath.prototype.cubicTo=function(t,n,r,a,i,s){return this._cubicTo(t,n,r,a,i,s),this},e.SkPath.prototype.dash=function(t,n,r){return this._dash(t,n,r)?this:null},e.SkPath.prototype.ellipse=function(t,n,r,a,i,s,u,f){return this._ellipse(t,n,r,a,i,s,u,!!f),this},e.SkPath.prototype.lineTo=function(t,n){return this._lineTo(t,n),this},e.SkPath.prototype.moveTo=function(t,n){return this._moveTo(t,n),this},e.SkPath.prototype.op=function(t,n){return this._op(t,n)?this:null},e.SkPath.prototype.quadraticCurveTo=function(t,n,r,a){return this._quadTo(t,n,r,a),this},e.SkPath.prototype.quadTo=function(t,n,r,a){return this._quadTo(t,n,r,a),this},e.SkPath.prototype.rect=function(t,n,r,a){return this._rect(t,n,r,a),this},e.SkPath.prototype.simplify=function(){return this._simplify()?this:null},e.SkPath.prototype.stroke=function(t){return t=t||{},t.width=t.width||1,t.miter_limit=t.miter_limit||4,t.cap=t.cap||e.StrokeCap.BUTT,t.join=t.join||e.StrokeJoin.MITER,this._stroke(t)?this:null},e.SkPath.prototype.transform=function(){if(arguments.length===1)this._transform(arguments[0]);else if(arguments.length===9){var t=arguments;this._transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}else return console.Ma("transform expected to take 1 or 9 arguments. Got "+arguments.length),null;return this},e.SkPath.prototype.trim=function(t,n,r){return this._trim(t,n,!!r)?this:null}}}(o);var O=J({},o),w=typeof window=="object",C=typeof importScripts=="function",y="",B,lt,ct,St,pt,At;typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"?(y=C?Ht.dirname(y)+"/":__dirname+"/",At=()=>{pt||(St=Ht,pt=Ht)},B=function(e,t){return At(),e=pt.normalize(e),St.readFileSync(e,t?null:"utf8")},ct=e=>(e=B(e,!0),e.buffer||(e=new Uint8Array(e)),e),lt=(e,t,n)=>{At(),e=pt.normalize(e),St.readFile(e,function(r,a){r?n(r):t(a.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(e){throw e}),process.on("unhandledRejection",function(e){throw e}),o.inspect=function(){return"[Emscripten Module object]"}):(w||C)&&(C?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),A&&(y=A),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",B=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},C&&(ct=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),lt=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var Ce=o.print||console.log.bind(console),X=o.printErr||console.warn.bind(console);J(o,O),O=null;var et;o.wasmBinary&&(et=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&ot("no native wasm support detected");var Et,Lt=!1,Xt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function bt(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&Xt)return Xt.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(a&128){var i=e[t++]&63;if((a&224)==192)r+=String.fromCharCode((a&31)<<6|i);else{var s=e[t++]&63;a=(a&240)==224?(a&15)<<12|i<<6|s:(a&7)<<18|i<<12|s<<6|e[t++]&63,65536>a?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|a&1023))}}else r+=String.fromCharCode(a)}return r}function $e(e,t,n){var r=S;if(0<n){n=t+n-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i){var s=e.charCodeAt(++a);i=65536+((i&1023)<<10)|s&1023}if(127>=i){if(t>=n)break;r[t++]=i}else{if(2047>=i){if(t+1>=n)break;r[t++]=192|i>>6}else{if(65535>=i){if(t+2>=n)break;r[t++]=224|i>>12}else{if(t+3>=n)break;r[t++]=240|i>>18,r[t++]=128|i>>12&63}r[t++]=128|i>>6&63}r[t++]=128|i&63}}r[t]=0}}var Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function je(e,t){for(var n=e>>1,r=n+t/2;!(n>=r)&&nt[n];)++n;if(n<<=1,32<n-e&&Yt)return Yt.decode(S.subarray(e,n));for(n="",r=0;!(r>=t/2);++r){var a=z[e+2*r>>1];if(a==0)break;n+=String.fromCharCode(a)}return n}function Re(e,t,n){if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var r=t;n=n<2*e.length?n/2:e.length;for(var a=0;a<n;++a)z[t>>1]=e.charCodeAt(a),t+=2;return z[t>>1]=0,t-r}function Oe(e){return 2*e.length}function Fe(e,t){for(var n=0,r="";!(n>=t/4);){var a=E[e+4*n>>2];if(a==0)break;++n,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|a&1023)):r+=String.fromCharCode(a)}return r}function We(e,t,n){if(n===void 0&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i){var s=e.charCodeAt(++a);i=65536+((i&1023)<<10)|s&1023}if(E[t>>2]=i,t+=4,t+4>n)break}return E[t>>2]=0,t-r}function Ie(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t}var Ct,ht,S,z,nt,E,W,Qt,Jt;function te(){var e=Et.buffer;Ct=e,o.HEAP8=ht=new Int8Array(e),o.HEAP16=z=new Int16Array(e),o.HEAP32=E=new Int32Array(e),o.HEAPU8=S=new Uint8Array(e),o.HEAPU16=nt=new Uint16Array(e),o.HEAPU32=W=new Uint32Array(e),o.HEAPF32=Qt=new Float32Array(e),o.HEAPF64=Jt=new Float64Array(e)}var rt,ee=[],ne=[],re=[];function xe(){var e=o.preRun.shift();ee.unshift(e)}var K=0,at=null;o.preloadedImages={},o.preloadedAudios={};function ot(e){throw o.onAbort&&o.onAbort(e),e="Aborted("+e+")",X(e),Lt=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),tt(e),e}function ae(){return $.startsWith("data:application/octet-stream;base64,")}var $;if($="pathkit.wasm",!ae()){var oe=$;$=o.locateFile?o.locateFile(oe,y):y+oe}function ie(){var e=$;try{if(e==$&&et)return new Uint8Array(et);if(ct)return ct(e);throw"both async and sync fetching of the wasm failed"}catch(t){ot(t)}}function Ne(){if(!et&&(w||C)){if(typeof fetch=="function"&&!$.startsWith("file://"))return fetch($,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+$+"'";return e.arrayBuffer()}).catch(function(){return ie()});if(lt)return new Promise(function(e,t){lt($,function(n){e(new Uint8Array(n))},t)})}return Promise.resolve().then(function(){return ie()})}function $t(e){for(;0<e.length;){var t=e.shift();if(typeof t=="function")t(o);else{var n=t.Wa;typeof n=="number"?t.xa===void 0?rt.get(n)():rt.get(n)(t.xa):n(t.xa===void 0?null:t.xa)}}}var dt={};function jt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function b(e){return this.fromWireType(W[e>>2])}var Y={},G={},mt={};function ue(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function Rt(e,t){return e=ue(e),function(){return t.apply(this,arguments)}}function Ot(e){var t=Error,n=Rt(e,function(r){this.name=e,this.message=r,r=Error(r).stack,r!==void 0&&(this.stack=this.toString()+`
`+r.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var se=void 0;function vt(e){throw new se(e)}function N(e,t,n){function r(u){u=n(u),u.length!==e.length&&vt("Mismatched type converter count");for(var f=0;f<e.length;++f)I(e[f],u[f])}e.forEach(function(u){mt[u]=t});var a=Array(t.length),i=[],s=0;t.forEach(function(u,f){G.hasOwnProperty(u)?a[f]=G[u]:(i.push(u),Y.hasOwnProperty(u)||(Y[u]=[]),Y[u].push(function(){a[f]=G[u],++s,s===i.length&&r(a)}))}),i.length===0&&r(a)}var yt={};function gt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var fe=void 0;function g(e){for(var t="";S[e];)t+=fe[S[e++]];return t}var Q=void 0;function h(e){throw new Q(e)}function I(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||h('type "'+r+'" must have a positive integer typeid pointer'),G.hasOwnProperty(e)){if(n.Qa)return;h("Cannot register type '"+r+"' twice")}G[e]=t,delete mt[e],Y.hasOwnProperty(e)&&(t=Y[e],delete Y[e],t.forEach(function(a){a()}))}function Ft(e){h(e.ea.ha.fa.name+" instance already deleted")}var Wt=!1;function le(){}function ce(e){--e.count.value,e.count.value===0&&(e.ka?e.ma.la(e.ka):e.ha.fa.la(e.ga))}function it(e){return typeof FinalizationGroup>"u"?(it=t=>t,e):(Wt=new FinalizationGroup(function(t){for(var n=t.next();!n.done;n=t.next())n=n.value,n.ga?ce(n):console.warn("object already deleted: "+n.ga)}),it=t=>(Wt.register(t,t.ea,t.ea),t),le=t=>{Wt.unregister(t.ea)},it(e))}var ut=void 0,st=[];function It(){for(;st.length;){var e=st.pop();e.ea.pa=!1,e.delete()}}function D(){}var pe={};function he(e,t,n){if(e[t].ia===void 0){var r=e[t];e[t]=function(){return e[t].ia.hasOwnProperty(arguments.length)||h("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].ia+")!"),e[t].ia[arguments.length].apply(this,arguments)},e[t].ia=[],e[t].ia[r.ua]=r}}function xt(e,t,n){o.hasOwnProperty(e)?((n===void 0||o[e].ia!==void 0&&o[e].ia[n]!==void 0)&&h("Cannot register public name '"+e+"' twice"),he(o,e,e),o.hasOwnProperty(n)&&h("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),o[e].ia[n]=t):(o[e]=t,n!==void 0&&(o[e].Xa=n))}function Ue(e,t,n,r,a,i,s,u){this.name=e,this.constructor=t,this.qa=n,this.la=r,this.na=a,this.Oa=i,this.ta=s,this.La=u,this.Ta=[]}function Nt(e,t,n){for(;t!==n;)t.ta||h("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.ta(e),t=t.na;return e}function Ze(e,t){return t===null?(this.Ba&&h("null is not a valid "+this.name),0):(t.ea||h('Cannot pass "'+Dt(t)+'" as a '+this.name),t.ea.ga||h("Cannot pass deleted object as a pointer of type "+this.name),Nt(t.ea.ga,t.ea.ha.fa,this.fa))}function Me(e,t){if(t===null){if(this.Ba&&h("null is not a valid "+this.name),this.wa){var n=this.sa();return e!==null&&e.push(this.la,n),n}return 0}if(t.ea||h('Cannot pass "'+Dt(t)+'" as a '+this.name),t.ea.ga||h("Cannot pass deleted object as a pointer of type "+this.name),!this.va&&t.ea.ha.va&&h("Cannot convert argument of type "+(t.ea.ma?t.ea.ma.name:t.ea.ha.name)+" to parameter type "+this.name),n=Nt(t.ea.ga,t.ea.ha.fa,this.fa),this.wa)switch(t.ea.ka===void 0&&h("Passing raw pointer to smart pointer is illegal"),this.Va){case 0:t.ea.ma===this?n=t.ea.ka:h("Cannot convert argument of type "+(t.ea.ma?t.ea.ma.name:t.ea.ha.name)+" to parameter type "+this.name);break;case 1:n=t.ea.ka;break;case 2:if(t.ea.ma===this)n=t.ea.ka;else{var r=t.clone();n=this.Ua(n,V(function(){r.delete()})),e!==null&&e.push(this.la,n)}break;default:h("Unsupporting sharing policy")}return n}function Be(e,t){return t===null?(this.Ba&&h("null is not a valid "+this.name),0):(t.ea||h('Cannot pass "'+Dt(t)+'" as a '+this.name),t.ea.ga||h("Cannot pass deleted object as a pointer of type "+this.name),t.ea.ha.va&&h("Cannot convert argument of type "+t.ea.ha.name+" to parameter type "+this.name),Nt(t.ea.ga,t.ea.ha.fa,this.fa))}function de(e,t,n){return t===n?e:n.na===void 0?null:(e=de(e,t,n.na),e===null?null:n.La(e))}var ft={};function De(e,t){for(t===void 0&&h("ptr should not be undefined");e.na;)t=e.ta(t),e=e.na;return ft[t]}function _t(e,t){return t.ha&&t.ga||vt("makeClassHandle requires ptr and ptrType"),!!t.ma!=!!t.ka&&vt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},it(Object.create(e,{ea:{value:t}}))}function U(e,t,n,r){this.name=e,this.fa=t,this.Ba=n,this.va=r,this.wa=!1,this.la=this.Ua=this.sa=this.Ia=this.Va=this.Sa=void 0,t.na!==void 0?this.toWireType=Me:(this.toWireType=r?Ze:Be,this.ja=null)}function me(e,t,n){o.hasOwnProperty(e)||vt("Replacing nonexistant public symbol"),o[e].ia!==void 0&&n!==void 0?o[e].ia[n]=t:(o[e]=t,o[e].ua=n)}function Ve(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return e.includes("j")?(r=o["dynCall_"+e],r=n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)):r=rt.get(t).apply(null,n),r}}function P(e,t){e=g(e);var n=e.includes("j")?Ve(e,t):rt.get(t);return typeof n!="function"&&h("unknown function pointer with signature "+e+": "+t),n}var ve=void 0;function ye(e){e=ke(e);var t=g(e);return Z(e),t}function wt(e,t){function n(i){a[i]||G[i]||(mt[i]?mt[i].forEach(n):(r.push(i),a[i]=!0))}var r=[],a={};throw t.forEach(n),new ve(e+": "+r.map(ye).join([", "]))}function Ut(e,t){for(var n=[],r=0;r<e;r++)n.push(E[(t>>2)+r]);return n}function Zt(e,t,n,r,a){var i=t.length;2>i&&h("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=t[1]!==null&&n!==null,u=!1;for(n=1;n<t.length;++n)if(t[n]!==null&&t[n].ja===void 0){u=!0;break}var f=t[0].name!=="void",l=i-2,c=Array(l),p=[],d=[];return function(){if(arguments.length!==l&&h("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),d.length=0,p.length=s?2:1,p[0]=a,s){var v=t[1].toWireType(d,this);p[1]=v}for(var m=0;m<l;++m)c[m]=t[m+2].toWireType(d,arguments[m]),p.push(c[m]);if(m=r.apply(null,p),u)jt(d);else for(var T=s?1:2;T<t.length;T++){var k=T===1?v:c[T-2];t[T].ja!==null&&t[T].ja(k)}return v=f?t[0].fromWireType(m):void 0,v}}var Mt=[],F=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ge(e){4<e&&--F[e].Ca===0&&(F[e]=void 0,Mt.push(e))}function Bt(e){return e||h("Cannot use deleted val. handle = "+e),F[e].value}function V(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Mt.length?Mt.pop():F.length;return F[t]={Ca:1,value:e},t}}function qe(e,t,n){switch(t){case 0:return function(r){return this.fromWireType((n?ht:S)[r])};case 1:return function(r){return this.fromWireType((n?z:nt)[r>>1])};case 2:return function(r){return this.fromWireType((n?E:W)[r>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Pt(e,t){var n=G[e];return n===void 0&&h(t+" has unknown type "+ye(e)),n}function Dt(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function ze(e,t){switch(t){case 2:return function(n){return this.fromWireType(Qt[n>>2])};case 3:return function(n){return this.fromWireType(Jt[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Ke(e,t,n){switch(t){case 0:return n?function(r){return ht[r]}:function(r){return S[r]};case 1:return n?function(r){return z[r>>1]}:function(r){return nt[r>>1]};case 2:return n?function(r){return E[r>>2]}:function(r){return W[r>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Ge={};function Vt(e){var t=Ge[e];return t===void 0?g(e):t}var qt=[];function _e(){function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$===t;return n||delete t.$$$embind_global$$$,n}if(typeof globalThis=="object")return globalThis;if(typeof $$$embind_global$$$=="object"||(typeof Gt=="object"&&e(Gt)?$$$embind_global$$$=Gt:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function He(e){var t=qt.length;return qt.push(e),t}function Le(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=Pt(E[(t>>2)+r],"parameter "+r);return n}var we=[];function Xe(e){var t=Array(e+1);return function(n,r,a){t[0]=n;for(var i=0;i<e;++i){var s=Pt(E[(r>>2)+i],"parameter "+i);t[i+1]=s.readValueFromPointer(a),a+=s.argPackAdvance}return n=new(n.bind.apply(n,t)),V(n)}}var Pe={},be=[null,[],[]];se=o.InternalError=Ot("InternalError");for(var Te=Array(256),Tt=0;256>Tt;++Tt)Te[Tt]=String.fromCharCode(Tt);fe=Te,Q=o.BindingError=Ot("BindingError"),D.prototype.isAliasOf=function(e){if(!(this instanceof D&&e instanceof D))return!1;var t=this.ea.ha.fa,n=this.ea.ga,r=e.ea.ha.fa;for(e=e.ea.ga;t.na;)n=t.ta(n),t=t.na;for(;r.na;)e=r.ta(e),r=r.na;return t===r&&n===e},D.prototype.clone=function(){if(this.ea.ga||Ft(this),this.ea.ra)return this.ea.count.value+=1,this;var e=it,t=Object,n=t.create,r=Object.getPrototypeOf(this),a=this.ea;return e=e(n.call(t,r,{ea:{value:{count:a.count,pa:a.pa,ra:a.ra,ga:a.ga,ha:a.ha,ka:a.ka,ma:a.ma}}})),e.ea.count.value+=1,e.ea.pa=!1,e},D.prototype.delete=function(){this.ea.ga||Ft(this),this.ea.pa&&!this.ea.ra&&h("Object already scheduled for deletion"),le(this),ce(this.ea),this.ea.ra||(this.ea.ka=void 0,this.ea.ga=void 0)},D.prototype.isDeleted=function(){return!this.ea.ga},D.prototype.deleteLater=function(){return this.ea.ga||Ft(this),this.ea.pa&&!this.ea.ra&&h("Object already scheduled for deletion"),st.push(this),st.length===1&&ut&&ut(It),this.ea.pa=!0,this},U.prototype.Pa=function(e){return this.Ia&&(e=this.Ia(e)),e},U.prototype.Ga=function(e){this.la&&this.la(e)},U.prototype.argPackAdvance=8,U.prototype.readValueFromPointer=b,U.prototype.deleteObject=function(e){e!==null&&e.delete()},U.prototype.fromWireType=function(e){function t(){return this.wa?_t(this.fa.qa,{ha:this.Sa,ga:n,ma:this,ka:e}):_t(this.fa.qa,{ha:this,ga:e})}var n=this.Pa(e);if(!n)return this.Ga(e),null;var r=De(this.fa,n);if(r!==void 0)return r.ea.count.value===0?(r.ea.ga=n,r.ea.ka=e,r.clone()):(r=r.clone(),this.Ga(e),r);if(r=this.fa.Oa(n),r=pe[r],!r)return t.call(this);r=this.va?r.Ja:r.pointerType;var a=de(n,this.fa,r.fa);return a===null?t.call(this):this.wa?_t(r.fa.qa,{ha:r,ga:a,ma:this,ka:e}):_t(r.fa.qa,{ha:r,ga:a})},o.getInheritedInstanceCount=function(){return Object.keys(ft).length},o.getLiveInheritedInstances=function(){var e=[],t;for(t in ft)ft.hasOwnProperty(t)&&e.push(ft[t]);return e},o.flushPendingDeletes=It,o.setDelayFunction=function(e){ut=e,st.length&&ut&&ut(It)},ve=o.UnboundTypeError=Ot("UnboundTypeError"),o.count_emval_handles=function(){for(var e=0,t=5;t<F.length;++t)F[t]!==void 0&&++e;return e},o.get_first_emval=function(){for(var e=5;e<F.length;++e)if(F[e]!==void 0)return F[e];return null};var Ye={r:function(e){var t=dt[e];delete dt[e];var n=t.elements,r=n.length,a=n.map(function(u){return u.Aa}).concat(n.map(function(u){return u.Ea})),i=t.sa,s=t.la;N([e],a,function(u){return n.forEach(function(f,l){var c=u[l],p=f.ya,d=f.za,v=u[l+r],m=f.Da,T=f.Fa;f.read=k=>c.fromWireType(p(d,k)),f.write=(k,H)=>{var j=[];m(T,k,v.toWireType(j,H)),jt(j)}}),[{name:t.name,fromWireType:function(f){for(var l=Array(r),c=0;c<r;++c)l[c]=n[c].read(f);return s(f),l},toWireType:function(f,l){if(r!==l.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+r+", actual="+l.length);for(var c=i(),p=0;p<r;++p)n[p].write(c,l[p]);return f!==null&&f.push(s,c),c},argPackAdvance:8,readValueFromPointer:b,ja:s}]})},u:function(e){var t=yt[e];delete yt[e];var n=t.sa,r=t.la,a=t.Ha,i=a.map(function(s){return s.Aa}).concat(a.map(function(s){return s.Ea}));N([e],i,function(s){var u={};return a.forEach(function(f,l){var c=s[l],p=f.ya,d=f.za,v=s[l+a.length],m=f.Da,T=f.Fa;u[f.Na]={read:function(k){return c.fromWireType(p(d,k))},write:function(k,H){var j=[];m(T,k,v.toWireType(j,H)),jt(j)}}}),[{name:t.name,fromWireType:function(f){var l={},c;for(c in u)l[c]=u[c].read(f);return r(f),l},toWireType:function(f,l){for(var c in u)if(!(c in l))throw new TypeError('Missing field:  "'+c+'"');var p=n();for(c in u)u[c].write(p,l[c]);return f!==null&&f.push(r,p),p},argPackAdvance:8,readValueFromPointer:b,ja:r}]})},z:function(){},F:function(e,t,n,r,a){var i=gt(n);t=g(t),I(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,u){return u?r:a},argPackAdvance:8,readValueFromPointer:function(s){if(n===1)var u=ht;else if(n===2)u=z;else if(n===4)u=E;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(u[s>>i])},ja:null})},l:function(e,t,n,r,a,i,s,u,f,l,c,p,d){c=g(c),i=P(a,i),u&&(u=P(s,u)),l&&(l=P(f,l)),d=P(p,d);var v=ue(c);xt(v,function(){wt("Cannot construct "+c+" due to unbound types",[r])}),N([e,t,n],r?[r]:[],function(m){if(m=m[0],r)var T=m.fa,k=T.qa;else k=D.prototype;m=Rt(v,function(){if(Object.getPrototypeOf(this)!==H)throw new Q("Use 'new' to construct "+c);if(j.oa===void 0)throw new Q(c+" has no accessible constructor");var Ae=j.oa[arguments.length];if(Ae===void 0)throw new Q("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(j.oa).toString()+") parameters instead!");return Ae.apply(this,arguments)});var H=Object.create(k,{constructor:{value:m}});m.prototype=H;var j=new Ue(c,m,H,d,T,i,u,l);T=new U(c,j,!0,!1),k=new U(c+"*",j,!1,!1);var Se=new U(c+" const*",j,!1,!0);return pe[e]={pointerType:k,Ja:Se},me(v,m),[T,k,Se]})},i:function(e,t,n,r,a,i){0<t||ot(void 0);var s=Ut(t,n);a=P(r,a),N([],[e],function(u){u=u[0];var f="constructor "+u.name;if(u.fa.oa===void 0&&(u.fa.oa=[]),u.fa.oa[t-1]!==void 0)throw new Q("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+u.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return u.fa.oa[t-1]=()=>{wt("Cannot construct "+u.name+" due to unbound types",s)},N([],s,function(l){return l.splice(1,0,null),u.fa.oa[t-1]=Zt(f,l,null,a,i),[]}),[]})},a:function(e,t,n,r,a,i,s,u){var f=Ut(n,r);t=g(t),i=P(a,i),N([],[e],function(l){function c(){wt("Cannot call "+p+" due to unbound types",f)}l=l[0];var p=l.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),u&&l.fa.Ta.push(t);var d=l.fa.qa,v=d[t];return v===void 0||v.ia===void 0&&v.className!==l.name&&v.ua===n-2?(c.ua=n-2,c.className=l.name,d[t]=c):(he(d,t,p),d[t].ia[n-2]=c),N([],f,function(m){return m=Zt(p,m,l,i,s),d[t].ia===void 0?(m.ua=n-2,d[t]=m):d[t].ia[n-2]=m,[]}),[]})},I:function(e,t,n){e=g(e),N([],[t],function(r){return r=r[0],o[e]=r.fromWireType(n),[]})},E:function(e,t){t=g(t),I(e,{name:t,fromWireType:function(n){var r=Bt(n);return ge(n),r},toWireType:function(n,r){return V(r)},argPackAdvance:8,readValueFromPointer:b,ja:null})},h:function(e,t,n,r){function a(){}n=gt(n),t=g(t),a.values={},I(e,{name:t,constructor:a,fromWireType:function(i){return this.constructor.values[i]},toWireType:function(i,s){return s.value},argPackAdvance:8,readValueFromPointer:qe(t,n,r),ja:null}),xt(t,a)},k:function(e,t,n){var r=Pt(e,"enum");t=g(t),e=r.constructor,r=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:Rt(r.name+"_"+t,function(){})}}),e.values[n]=r,e[t]=r},q:function(e,t,n){n=gt(n),t=g(t),I(e,{name:t,fromWireType:function(r){return r},toWireType:function(r,a){return a},argPackAdvance:8,readValueFromPointer:ze(t,n),ja:null})},f:function(e,t,n,r,a,i){var s=Ut(t,n);e=g(e),a=P(r,a),xt(e,function(){wt("Cannot call "+e+" due to unbound types",s)},t-1),N([],s,function(u){return u=[u[0],null].concat(u.slice(1)),me(e,Zt(e,u,null,a,i),t-1),[]})},e:function(e,t,n,r,a){t=g(t),a===-1&&(a=4294967295),a=gt(n);var i=u=>u;if(r===0){var s=32-8*n;i=u=>u<<s>>>s}n=t.includes("unsigned")?function(u,f){return f>>>0}:function(u,f){return f},I(e,{name:t,fromWireType:i,toWireType:n,argPackAdvance:8,readValueFromPointer:Ke(t,a,r!==0),ja:null})},b:function(e,t,n){function r(i){i>>=2;var s=W;return new a(Ct,s[i+1],s[i])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];n=g(n),I(e,{name:n,fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{Qa:!0})},p:function(e,t){t=g(t);var n=t==="std::string";I(e,{name:t,fromWireType:function(r){var a=W[r>>2];if(n)for(var i=r+4,s=0;s<=a;++s){var u=r+4+s;if(s==a||S[u]==0){if(i=i?bt(S,i,u-i):"",f===void 0)var f=i;else f+=String.fromCharCode(0),f+=i;i=u+1}}else{for(f=Array(a),s=0;s<a;++s)f[s]=String.fromCharCode(S[r+4+s]);f=f.join("")}return Z(r),f},toWireType:function(r,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var i=typeof a=="string";i||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||h("Cannot pass non-string to std::string");var s=(n&&i?()=>{for(var l=0,c=0;c<a.length;++c){var p=a.charCodeAt(c);55296<=p&&57343>=p&&(p=65536+((p&1023)<<10)|a.charCodeAt(++c)&1023),127>=p?++l:l=2047>=p?l+2:65535>=p?l+3:l+4}return l}:()=>a.length)(),u=zt(4+s+1);if(W[u>>2]=s,n&&i)$e(a,u+4,s+1);else if(i)for(i=0;i<s;++i){var f=a.charCodeAt(i);255<f&&(Z(u),h("String has UTF-16 code units that do not fit in 8 bits")),S[u+4+i]=f}else for(i=0;i<s;++i)S[u+4+i]=a[i];return r!==null&&r.push(Z,u),u},argPackAdvance:8,readValueFromPointer:b,ja:function(r){Z(r)}})},m:function(e,t,n){if(n=g(n),t===2)var r=je,a=Re,i=Oe,s=()=>nt,u=1;else t===4&&(r=Fe,a=We,i=Ie,s=()=>W,u=2);I(e,{name:n,fromWireType:function(f){for(var l=W[f>>2],c=s(),p,d=f+4,v=0;v<=l;++v){var m=f+4+v*t;(v==l||c[m>>u]==0)&&(d=r(d,m-d),p===void 0?p=d:(p+=String.fromCharCode(0),p+=d),d=m+t)}return Z(f),p},toWireType:function(f,l){typeof l!="string"&&h("Cannot pass non-string to C++ string type "+n);var c=i(l),p=zt(4+c+t);return W[p>>2]=c>>u,a(l,p+4,c+t),f!==null&&f.push(Z,p),p},argPackAdvance:8,readValueFromPointer:b,ja:function(f){Z(f)}})},t:function(e,t,n,r,a,i){dt[e]={name:g(t),sa:P(n,r),la:P(a,i),elements:[]}},s:function(e,t,n,r,a,i,s,u,f){dt[e].elements.push({Aa:t,ya:P(n,r),za:a,Ea:i,Da:P(s,u),Fa:f})},v:function(e,t,n,r,a,i){yt[e]={name:g(t),sa:P(n,r),la:P(a,i),Ha:[]}},j:function(e,t,n,r,a,i,s,u,f,l){yt[e].Ha.push({Na:g(t),Aa:n,ya:P(r,a),za:i,Ea:s,Da:P(u,f),Fa:l})},G:function(e,t){t=g(t),I(e,{Ra:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},d:function(e,t,n,r){e=qt[e],t=Bt(t),n=Vt(n),e(t,n,null,r)},J:ge,x:function(e){return e===0?V(_e()):(e=Vt(e),V(_e()[e]))},c:function(e,t){var n=Le(e,t),r=n[0];t=r.name+"_$"+n.slice(1).map(function(s){return s.name}).join("_")+"$";var a=we[t];if(a!==void 0)return a;var i=Array(e-1);return a=He((s,u,f,l)=>{for(var c=0,p=0;p<e-1;++p)i[p]=n[p+1].readValueFromPointer(l+c),c+=n[p+1].argPackAdvance;for(s=s[u].apply(s,i),p=0;p<e-1;++p)n[p+1].Ka&&n[p+1].Ka(i[p]);if(!r.Ra)return r.toWireType(f,s)}),we[t]=a},n:function(e){4<e&&(F[e].Ca+=1)},w:function(e,t,n,r){e=Bt(e);var a=Pe[t];return a||(a=Xe(t),Pe[t]=a),a(e,n,r)},K:function(){return V([])},D:function(e){return V(Vt(e))},H:function(e,t){return e=Pt(e,"_emval_take_value"),e=e.readValueFromPointer(t),V(e)},g:function(){ot("")},B:function(e){var t=S.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296),r=Math.max(e,r),0<r%65536&&(r+=65536-r%65536);t:{try{Et.grow(Math.min(2147483648,r)-Ct.byteLength+65535>>>16),te();var a=1;break t}catch{}a=void 0}if(a)return!0}return!1},C:function(){return 0},y:function(){},o:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var s=E[t>>2],u=E[t+4>>2];t+=8;for(var f=0;f<u;f++){var l=S[s+f],c=be[e];l===0||l===10?((e===1?Ce:X)(bt(c,0)),c.length=0):c.push(l)}a+=u}return E[r>>2]=a,0},A:function(){}};(function(){function e(a){o.asm=a.exports,Et=o.asm.L,te(),rt=o.asm._,ne.unshift(o.asm.M),K--,o.monitorRunDependencies&&o.monitorRunDependencies(K),K==0&&at&&(a=at,at=null,a())}function t(a){e(a.instance)}function n(a){return Ne().then(function(i){return WebAssembly.instantiate(i,r)}).then(function(i){return i}).then(a,function(i){X("failed to asynchronously prepare wasm: "+i),ot(i)})}var r={a:Ye};if(K++,o.monitorRunDependencies&&o.monitorRunDependencies(K),o.instantiateWasm)try{return o.instantiateWasm(r,e)}catch(a){return X("Module.instantiateWasm callback failed with error: "+a),!1}return function(){return et||typeof WebAssembly.instantiateStreaming!="function"||ae()||$.startsWith("file://")||typeof fetch!="function"?n(t):fetch($,{credentials:"same-origin"}).then(function(a){return WebAssembly.instantiateStreaming(a,r).then(t,function(i){return X("wasm streaming compile failed: "+i),X("falling back to ArrayBuffer instantiation"),n(t)})})}().catch(tt),{}})(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.M).apply(null,arguments)},o.__Z6ToCmdsRK6SkPath=function(){return(o.__Z6ToCmdsRK6SkPath=o.asm.N).apply(null,arguments)},o.__Z8FromCmdsmi=function(){return(o.__Z8FromCmdsmi=o.asm.O).apply(null,arguments)},o.__Z7NewPathv=function(){return(o.__Z7NewPathv=o.asm.P).apply(null,arguments)},o.__Z8CopyPathRK6SkPath=function(){return(o.__Z8CopyPathRK6SkPath=o.asm.Q).apply(null,arguments)},o.__Z6EqualsRK6SkPathS1_=function(){return(o.__Z6EqualsRK6SkPathS1_=o.asm.R).apply(null,arguments)},o.__Z11ToSVGStringRK6SkPath=function(){return(o.__Z11ToSVGStringRK6SkPath=o.asm.S).apply(null,arguments)},o.__Z13FromSVGStringNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=function(){return(o.__Z13FromSVGStringNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE=o.asm.T).apply(null,arguments)},o.__Z13ApplySimplifyR6SkPath=function(){return(o.__Z13ApplySimplifyR6SkPath=o.asm.U).apply(null,arguments)},o.__Z11ApplyPathOpR6SkPathRKS_8SkPathOp=function(){return(o.__Z11ApplyPathOpR6SkPathRKS_8SkPathOp=o.asm.V).apply(null,arguments)},o.__Z10MakeFromOpRK6SkPathS1_8SkPathOp=function(){return(o.__Z10MakeFromOpRK6SkPathS1_8SkPathOp=o.asm.W).apply(null,arguments)},o.__Z14ResolveBuilderR11SkOpBuilder=function(){return(o.__Z14ResolveBuilderR11SkOpBuilder=o.asm.X).apply(null,arguments)},o.__Z8ToCanvasRK6SkPathN10emscripten3valE=function(){return(o.__Z8ToCanvasRK6SkPathN10emscripten3valE=o.asm.Y).apply(null,arguments)},o.__Z8ToPath2DRK6SkPath=function(){return(o.__Z8ToPath2DRK6SkPath=o.asm.Z).apply(null,arguments)};var Z=o._free=function(){return(Z=o._free=o.asm.$).apply(null,arguments)},zt=o._malloc=function(){return(zt=o._malloc=o.asm.aa).apply(null,arguments)},ke=o.___getTypeName=function(){return(ke=o.___getTypeName=o.asm.ba).apply(null,arguments)};o.___embind_register_native_and_builtin_types=function(){return(o.___embind_register_native_and_builtin_types=o.asm.ca).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.da).apply(null,arguments)};var kt;at=function e(){kt||Kt(),kt||(at=e)};function Kt(){function e(){if(!kt&&(kt=!0,o.calledRun=!0,!Lt)){if($t(ne),q(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();re.unshift(t)}$t(re)}}if(!(0<K)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)xe();$t(ee),0<K||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e())}}if(o.run=Kt,o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return Kt(),R.ready}})();_.exports=x})(Ee);var nn=Ee.exports,rn=Qe(nn),an="/assets/pathkit-1356ccfa.wasm";const L=await rn({locateFile:()=>an});self.onerror=function(_){console.log("There was an error with the fog worker."),console.log(_)};self.onmessageerror=function(_){console.log("Error on message event for fog worker.")};self.onmessage=function(_){const{numb:M,polygons:x,mapOffset:A,mapSize:R}=_.data,o=new L.SkOpBuilder,J=L.NewPath().rect(A[0],A[1],R[0],R[1]);o.add(J,L.PathOp.UNION),J.delete();for(const O of x){const w=O.fromShape,C=L.NewPath();C.moveTo(O.pointset[0].x,O.pointset[0].y);for(let y=1;y<O.pointset.length;y++)C.lineTo(O.pointset[y].x,O.pointset[y].y);if(C.closePath(),w.style.closed!==!1){const y=L.NewPath();y.moveTo(w.points[0].x*w.scale.x+w.position.x,w.points[0].y*w.scale.y+w.position.y);for(let B=1;B<w.points.length-1;B++)y.lineTo(w.points[B].x*w.scale.x+w.position.x,w.points[B].y*w.scale.y+w.position.y);y.closePath(),C.op(y,L.PathOp.DIFFERENCE),y.delete()}o.add(C,L.PathOp.DIFFERENCE),C.delete()}let q;try{q=o.resolve()}catch(O){console.error("Error resolving path:",O),self.postMessage({numb:M,messageData:null});return}q.simplify();const tt=q.toCmds();q.delete(),o.delete(),self.postMessage({numb:M,messageData:tt})};
